<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Balanced Speed Car Racing</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      position: relative;
      color: #fff;
    }

    /* Start Screen Styling */
    #startScreen {
      position: absolute;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: linear-gradient(135deg, #0f3460 0%, #1a1a2e 100%);
      color: #FFF;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      z-index: 20;
      box-shadow: 0 0 50px rgba(0, 0, 0, 0.7);
    }
    #startScreen h1 {
      font-size: 48px;
      margin-bottom: 16px;
      text-shadow: 0 0 10px #08f, 0 0 20px #08f;
      animation: glow 1.5s ease-in-out infinite alternate;
    }
    #startScreen p {
      font-size: 22px;
      margin-bottom: 8px;
      color: #e6e6ff;
    }
    #startScreen ul {
      list-style: none;
      margin: 20px 0;
      max-width: 600px;
      background: rgba(0, 20, 60, 0.3);
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 0 15px rgba(0, 100, 255, 0.2);
    }
    #startScreen ul li {
      margin: 12px 0;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    #startScreen ul li i {
      margin-right: 10px;
      color: #08f;
      font-size: 20px;
    }
    #startButton {
      padding: 15px 40px;
      font-size: 22px;
      background: linear-gradient(135deg, #08F 0%, #0066cc 100%);
      color: #FFF;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      margin-top: 20px;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 102, 204, 0.4);
      font-weight: bold;
      letter-spacing: 1px;
    }
    #startButton:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(0, 102, 204, 0.6);
    }
    #startButton:active {
      transform: translateY(1px);
    }

    /* Game Container */
    #gameContainer {
      display: none;
      position: relative;
      width: 400px;
      height: 600px;
    }

    canvas {
      background: linear-gradient(to bottom, #333 0%, #111 100%);
      border: 4px solid #08f;
      border-radius: 5px;
      display: block;
      box-shadow: 0 0 30px rgba(0, 100, 255, 0.5);
    }

    /* CSS Car Styling */
    #cssCar {
      position: absolute;
      bottom: 40px;
      left: 180px;
      width: 40px;
      height: 60px;
      pointer-events: none;
      z-index: 15;
      transition: transform 0.1s ease;
    }
    #cssCar .body {
      position: absolute;
      width: 100%;
      height: 60%;
      background: linear-gradient(135deg, #08F 0%, #0066cc 100%);
      border-radius: 6px 6px 10px 10px;
      top: 0;
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.5);
    }
    #cssCar .roof {
      position: absolute;
      top: -10px;
      left: 5px;
      width: 30px;
      height: 15px;
      background: #08F;
      border-radius: 5px 5px 0 0;
    }
    #cssCar .headlight {
      position: absolute;
      bottom: 5px;
      width: 5px;
      height: 5px;
      background: yellow;
      border-radius: 50%;
    }
    #cssCar .headlight.left { left: 5px; }
    #cssCar .headlight.right { right: 5px; }
    #cssCar .wheel {
      position: absolute;
      bottom: -6px;
      width: 16px;
      height: 16px;
      background: #111;
      border: 2px solid #555;
      border-radius: 50%;
      animation: spin 0.5s linear infinite;
    }
    #cssCar .front-wheel { right: 5px; }
    #cssCar .back-wheel  { left: 5px; }

    /* Animations */
    @keyframes spin {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }
    @keyframes glow {
      from { text-shadow: 0 0 10px #08f, 0 0 20px #08f; }
      to   { text-shadow: 0 0 15px #08f, 0 0 30px #08f, 0 0 40px #08f; }
    }
    @keyframes float {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }

    /* Restart Button */
    #restartButton {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 12px 24px;
      font-size: 20px;
      background: linear-gradient(135deg, #ff3333 0%, #cc0000 100%);
      color: #FFF;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      display: none;
      animation: fadeIn 0.8s ease-out;
      z-index: 10;
      font-weight: bold;
      box-shadow: 0 5px 15px rgba(204, 0, 0, 0.4);
      transition: all 0.3s ease;
    }
    #restartButton:hover {
      transform: translate(-50%, -50%) scale(1.05);
    }

    @keyframes fadeIn {
      from { opacity: 0; } to { opacity: 1; }
    }

    /* Developer Credit */
    #developerCredit {
      position: absolute;
      right: 10px;
      bottom: -50px;
      color: lightgray;
      font-size: 12px;
      transition: bottom 1s ease;
      z-index: 10;
      font-style: italic;
    }

    /* Control Buttons */
    .steer-button {
      position: absolute;
      bottom: 20px;
      width: 70px;
      height: 70px;
      background: rgba(255,255,255,0.15);
      color: #FFF;
      font-size: 30px;
      border: none;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      user-select: none;
      z-index: 10;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(5px);
      transition: all 0.2s ease;
    }
    .steer-button:hover {
      background: rgba(255,255,255,0.25);
      transform: scale(1.05);
    }
    .steer-button:active {
      transform: scale(0.95);
    }

    #leftBtn  { left: 20px; }
    #rightBtn { right: 20px; }

    /* Game Info */
    #gameInfo {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 10;
      background: rgba(0, 0, 0, 0.5);
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 18px;
      font-weight: bold;
      color: white;
    }

    /* Boost Indicator */
    #boostIndicator {
      position: absolute;
      top: 15px;
      right: 15px;
      width: 120px;
      height: 20px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 10px;
      overflow: hidden;
      z-index: 10;
    }
    #boostBar {
      height: 100%;
      width: 0%;
      background: linear-gradient(to right, #00ff00, #00cc00);
      transition: width 0.3s ease;
    }

    /* Responsive Design */
    @media (max-width: 450px) {
      #gameContainer { transform: scale(0.9); }
      #startScreen h1 { font-size: 36px; }
      #startScreen p { font-size: 18px; }
      #startScreen ul li { font-size: 16px; }
      #startButton { padding: 12px 30px; font-size: 18px; }
    }
    
    /* Countdown */
    #countdown {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 100px;
      font-weight: bold;
      color: #08f;
      z-index: 25;
      display: none;
      text-shadow: 0 0 20px rgba(0, 136, 255, 0.8);
    }
    
    /* Pause Screen */
    #pauseScreen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 20;
      display: none;
    }
    #pauseScreen h2 {
      font-size: 48px;
      margin-bottom: 30px;
      color: #08f;
      text-shadow: 0 0 15px rgba(0, 136, 255, 0.8);
    }
    #resumeButton {
      padding: 12px 35px;
      font-size: 20px;
      background: linear-gradient(135deg, #08F 0%, #0066cc 100%);
      color: #FFF;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      margin-top: 20px;
      font-weight: bold;
      box-shadow: 0 5px 15px rgba(0, 102, 204, 0.4);
    }
    
    /* High Score */
    #highScore {
      position: absolute;
      top: 15px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.5);
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 18px;
      font-weight: bold;
      color: gold;
      z-index: 10;
    }
  </style>
</head>
<body>

  <!-- Start Screen -->
  <div id="startScreen">
    <h1>ENHANCED SPEED RACER</h1>
    <p>Race through obstacles and collect bonuses!</p>
    <ul>
      <li><i class="fas fa-arrow-left"></i> Use ◀ ▶ buttons or ← → keys to steer</li>
      <li><i class="fas fa-mobile-alt"></i> Swipe on mobile or drag to move</li>
      <li><i class="fas fa-ban"></i> Avoid red obstacles</li>
      <li><i class="fas fa-coins"></i> Collect gold coins for points</li>
      <li><i class="fas fa-bolt"></i> Grab green boosts for speed</li>
      <li><i class="fas fa-trophy"></i> Beat your high score!</li>
    </ul>
    <button id="startButton">START RACE</button>
  </div>

  <!-- Game Container -->
  <div id="gameContainer">
    <canvas id="gameCanvas" width="400" height="600"></canvas>
    
    <div id="countdown">3</div>
    
    <div id="pauseScreen">
      <h2>GAME PAUSED</h2>
      <p>Press P or the button to resume</p>
      <button id="resumeButton">RESUME</button>
    </div>

    <div id="cssCar">
      <div class="roof"></div>
      <div class="body"></div>
      <div class="headlight left"></div>
      <div class="headlight right"></div>
      <div class="wheel front-wheel"></div>
      <div class="wheel back-wheel"></div>
    </div>

    <button id="restartButton">RESTART GAME</button>
    <div id="developerCredit">Developed by AIT Inc Ltd</div>

    <div id="gameInfo">Score: <span id="scoreDisplay">0</span></div>
    <div id="highScore">High Score: <span id="highScoreDisplay">0</span></div>
    <div id="boostIndicator"><div id="boostBar"></div></div>

    <button id="leftBtn"  class="steer-button">◀</button>
    <button id="rightBtn" class="steer-button">▶</button>
  </div>

  <!-- Audio elements -->
  <audio id="bgMusic" loop preload="auto">
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
  </audio>
  <audio id="coinSound" preload="auto">
    <source src="https://www.soundjay.com/buttons/sounds/button-09.mp3" type="audio/mpeg">
  </audio>
  <audio id="boostSound" preload="auto">
    <source src="https://www.soundjay.com/buttons/sounds/button-09.mp3" type="audio/mpeg">
  </audio>
  <audio id="crashSound" preload="auto">
    <source src="https://www.soundjay.com/buttons/sounds/button-10.mp3" type="audio/mpeg">
  </audio>

  <script>
    // DOM Elements
    const startScreen   = document.getElementById('startScreen');
    const startButton   = document.getElementById('startButton');
    const gameContainer = document.getElementById('gameContainer');
    const canvas        = document.getElementById('gameCanvas');
    const ctx           = canvas.getContext('2d');
    const restartBtn    = document.getElementById('restartButton');
    const devCredit     = document.getElementById('developerCredit');
    const cssCar        = document.getElementById('cssCar');
    const leftBtn       = document.getElementById('leftBtn');
    const rightBtn      = document.getElementById('rightBtn');
    const scoreDisplay  = document.getElementById('scoreDisplay');
    const highScoreDisplay = document.getElementById('highScoreDisplay');
    const boostBar      = document.getElementById('boostBar');
    const countdown     = document.getElementById('countdown');
    const pauseScreen   = document.getElementById('pauseScreen');
    const resumeButton  = document.getElementById('resumeButton');
    const highScoreEl   = document.getElementById('highScore');

    // Audio elements
    const music         = document.getElementById('bgMusic');
    const coinSound     = document.getElementById('coinSound');
    const boostSound    = document.getElementById('boostSound');
    const crashSound    = document.getElementById('crashSound');

    // Game variables
    let lastTime = 0;
    let gameOver = false;
    let gamePaused = false;
    let score = 0;
    let highScore = localStorage.getItem('highScore') || 0;
    let laneOffset = 0;
    let boostActive = false;
    let boostTime = 0;
    const keys = { ArrowLeft: false, ArrowRight: false, KeyP: false };

    // Set high score display
    highScoreDisplay.textContent = highScore;

    // Car object
    const car = {
      x: 180, 
      y: 500, 
      w: 40, 
      h: 60,
      baseSpeed: 5, 
      wheelAngle: 0,
      touchX: null
    };

    // Game objects
    let obstacles = [], boosts = [], coins = [], particles = [];

    // Event listeners for keyboard
    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') keys[e.key] = true;
      if (e.key === 'p' || e.key === 'P') keys['KeyP'] = true;
    });
    document.addEventListener('keyup', e => {
      if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') keys[e.key] = false;
      if (e.key === 'p' || e.key === 'P') keys['KeyP'] = false;
    });

    // Add steer control for buttons
    function addSteerControl(btn, keyName) {
      btn.addEventListener('mousedown', () => keys[keyName] = true);
      btn.addEventListener('mouseup',   () => keys[keyName] = false);
      btn.addEventListener('mouseleave',() => keys[keyName] = false);
      btn.addEventListener('touchstart', e => { e.preventDefault(); keys[keyName] = true; });
      btn.addEventListener('touchend',   e => { e.preventDefault(); keys[keyName] = false; });
    }
    addSteerControl(leftBtn, 'ArrowLeft');
    addSteerControl(rightBtn,'ArrowRight');

    // Touch controls
    canvas.addEventListener('touchstart', onTouch);
    canvas.addEventListener('touchmove',  onTouch);
    canvas.addEventListener('touchend',   () => car.touchX = null);
    function onTouch(e) {
      e.preventDefault();
      const rect = canvas.getBoundingClientRect();
      car.touchX = e.touches[0].clientX - rect.left;
    }

    // Restart and resume buttons
    restartBtn.addEventListener('click', resetGame);
    resumeButton.addEventListener('click', togglePause);

    // Toggle pause function
    function togglePause() {
      gamePaused = !gamePaused;
      pauseScreen.style.display = gamePaused ? 'flex' : 'none';
      
      if (!gamePaused && !gameOver) {
        music.play().catch(() => {});
        requestAnimationFrame(loop);
      } else {
        music.pause();
      }
    }

    // Spawn game objects
    function spawnObstacle() {
      const spawnChance = 0.02 + (score * 0.0001);
      if (Math.random() < spawnChance) {
        const w = 30 + Math.random()*30;
        obstacles.push({
          x: Math.random()*(canvas.width - w),
          y: -60,
          w,
          h: 20 + Math.random()*20,
          speed: 3 + Math.random()*2 + (score * 0.01)
        });
      }
    }
    
    function spawnBoost() {
      if (Math.random() < 0.008) {
        boosts.push({
          x: Math.random()*(canvas.width - 80),
          y: -40,
          w: 80,
          h: 20,
          speed: 4
        });
      }
    }
    
    function spawnCoin() {
      if (Math.random() < 0.01) {
        coins.push({
          x: 20 + Math.random()*(canvas.width - 40),
          y: -20,
          r: 10,
          speed: 4,
          rotation: 0
        });
      }
    }

    // Collision detection
    function rectsCollide(a, b) {
      return a.x < b.x + b.w && a.x + a.w > b.x &&
             a.y < b.y + b.h && a.y + a.h > b.y;
    }
    
    function circRectCollide(c, r) {
      const dx = Math.abs(c.x - (r.x + r.w/2));
      const dy = Math.abs(c.y - (r.y + r.h/2));
      if (dx > r.w/2 + c.r || dy > r.h/2 + c.r) return false;
      if (dx <= r.w/2 || dy <= r.h/2) return true;
      const dx2 = dx - r.w/2, dy2 = dy - r.h/2;
      return dx2*dx2 + dy2*dy2 <= c.r*c.r;
    }

    // Update game state
    function update(dt) {
      // Handle pause
      if (keys['KeyP']) {
        keys['KeyP'] = false;
        togglePause();
      }
      
      if (gamePaused) return;
      
      const factor = dt/16;
      
      // Car movement
      if (keys.ArrowLeft && car.x > 0) car.x -= car.baseSpeed * factor;
      if (keys.ArrowRight && car.x + car.w < canvas.width) car.x += car.baseSpeed * factor;

      if (car.touchX !== null) {
        const target = car.touchX - car.w/2;
        const diff = target - car.x;
        const maxMove = car.baseSpeed * factor;
        car.x += Math.abs(diff) > maxMove ? Math.sign(diff)*maxMove : diff;
      }

      // Update CSS car position
      cssCar.style.left = `${car.x}px`;
      
      // Road movement effect
      laneOffset += 4 * factor;
      if (laneOffset > 40) laneOffset = 0;
      
      // Spawn objects
      spawnObstacle(); 
      spawnBoost(); 
      spawnCoin();
      
      // Update obstacles
      obstacles.forEach((o,i) => {
        o.y += o.speed * factor;
        if (rectsCollide(car, o)) {
          gameOver = true;
          crashSound.play();
          music.pause();
          music.currentTime = 0;
        }
        if (o.y > canvas.height) { 
          obstacles.splice(i,1); 
          score++; 
          scoreDisplay.textContent = score;
        }
      });
      
      // Update boosts
      boosts.forEach((b,i) => {
        b.y += b.speed * factor;
        if (rectsCollide(car, b)) {
          boostActive = true;
          boostTime = 1500;
          boostSound.play();
          car.baseSpeed = 8;
          boosts.splice(i,1);
        }
        if (b.y > canvas.height) boosts.splice(i,1);
      });
      
      // Handle boost timer
      if (boostActive) {
        boostTime -= dt;
        boostBar.style.width = `${(boostTime / 1500) * 100}%`;
        
        if (boostTime <= 0) {
          boostActive = false;
          car.baseSpeed = 5;
          boostBar.style.width = '0%';
        }
      }
      
      // Update coins
      coins.forEach((c,i) => {
        c.y += c.speed * factor;
        c.rotation += 0.1 * factor;
        if (circRectCollide(c, car)) {
          score += 2;
          scoreDisplay.textContent = score;
          coinSound.play();
          coins.splice(i,1);
        }
        if (c.y > canvas.height) coins.splice(i,1);
      });
      
      // Add particles for car exhaust
      [8, car.w - 8].forEach(offset => {
        if (Math.random() < 0.5) {
          particles.push({ 
            x: car.x + offset, 
            y: car.y + car.h, 
            r: 2 + Math.random()*2, 
            life: 20,
            color: boostActive ? '#00ffcc' : '#aaaaaa'
          });
        }
      });
      
      // Update particles
      particles.forEach((p,i) => {
        p.y += 2 * factor;
        p.x += (Math.random() - 0.5) * 2;
        if (--p.life <= 0) particles.splice(i,1);
      });
    }

    // Draw game objects
    function draw() {
      // Clear canvas
      ctx.clearRect(0,0,canvas.width,canvas.height);
      
      // Draw background
      const grad = ctx.createLinearGradient(0,0,0,canvas.height);
      grad.addColorStop(0,'#223355');
      grad.addColorStop(1,'#111122');
      ctx.fillStyle = grad;
      ctx.fillRect(0,0,canvas.width,canvas.height);
      
      // Draw road
      ctx.fillStyle = '#333344';
      ctx.fillRect(50,0,canvas.width-100,canvas.height);
      
      // Draw road markings
      ctx.fillStyle = '#aaaaaa';
      for (let y = -20 + laneOffset; y < canvas.height; y += 40) {
        ctx.fillRect(canvas.width/2 - 2, y, 4, 20);
      }
      
      // Draw boosts
      boosts.forEach(b => {
        const gradient = ctx.createLinearGradient(b.x, b.y, b.x, b.y + b.h);
        gradient.addColorStop(0, '#00ff00');
        gradient.addColorStop(1, '#009900');
        ctx.fillStyle = gradient;
        ctx.fillRect(b.x, b.y, b.w, b.h);
        
        // Draw boost icon
        ctx.fillStyle = 'black';
        ctx.font = '16px Arial';
        ctx.fillText('⚡', b.x + b.w/2 - 8, b.y + b.h/2 + 6);
      });
      
      // Draw coins
      coins.forEach(c => {
        ctx.save();
        ctx.translate(c.x, c.y);
        ctx.rotate(c.rotation);
        ctx.fillStyle = 'gold';
        ctx.beginPath();
        ctx.arc(0, 0, c.r, 0, Math.PI*2);
        ctx.fill();
        
        ctx.fillStyle = '#daa520';
        ctx.beginPath();
        ctx.arc(0, 0, c.r * 0.7, 0, Math.PI*2);
        ctx.fill();
        
        ctx.fillStyle = 'black';
        ctx.font = 'bold 10px Arial';
        ctx.fillText('$', -3, 4);
        ctx.restore();
      });
      
      // Draw obstacles
      obstacles.forEach(o => {
        const gradient = ctx.createLinearGradient(o.x, o.y, o.x, o.y + o.h);
        gradient.addColorStop(0, '#ff5555');
        gradient.addColorStop(1, '#cc0000');
        ctx.fillStyle = gradient;
        ctx.fillRect(o.x, o.y, o.w, o.h);
      });
      
      // Draw particles
      particles.forEach(p => {
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        ctx.fill();
      });
      
      // Draw car shadow
      ctx.fillStyle = 'rgba(0,0,0,0.3)';
      ctx.fillRect(car.x + 5, car.y + car.h + 2, car.w - 10, 10);
      
      // Game over screen
      if (gameOver) {
        ctx.fillStyle = 'rgba(0,0,0,0.7)';
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.fillStyle = '#FF5555';
        ctx.font = 'bold 40px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('GAME OVER', canvas.width/2, 250);
        
        ctx.fillStyle = '#FFFFFF';
        ctx.font = '30px sans-serif';
        ctx.fillText(`Score: ${score}`, canvas.width/2, 300);
        
        if (score > highScore) {
          ctx.fillStyle = 'gold';
          ctx.font = 'bold 26px sans-serif';
          ctx.fillText('NEW HIGH SCORE!', canvas.width/2, 350);
        }
        
        restartBtn.style.display = 'block';
        devCredit.style.bottom = '10px';
      }
    }

    // Game loop
    function loop(ts=0) {
      const dt = ts - lastTime || 16;
      lastTime = ts;
      
      if (!gameOver && !gamePaused) update(dt);
      draw();
      
      if (!gameOver && !gamePaused) {
        requestAnimationFrame(loop);
      }
    }

    // Start countdown
    function startCountdown() {
      let count = 3;
      countdown.style.display = 'flex';
      countdown.textContent = count;
      
      const countdownInterval = setInterval(() => {
        count--;
        countdown.textContent = count;
        
        if (count <= 0) {
          clearInterval(countdownInterval);
          countdown.style.display = 'none';
          requestAnimationFrame(loop);
        }
      }, 1000);
    }

    // Reset game
    function resetGame() {
      gameOver = false;
      gamePaused = false;
      score = 0;
      scoreDisplay.textContent = score;
      obstacles = [];
      boosts = [];
      coins = [];
      particles = [];
      car.x = 180;
      car.baseSpeed = 5;
      boostActive = false;
      boostTime = 0;
      boostBar.style.width = '0%';
      lastTime = 0;
      restartBtn.style.display = 'none';
      devCredit.style.bottom = '-50px';
      pauseScreen.style.display = 'none';
      
      // Update high score if needed
      if (score > highScore) {
        highScore = score;
        localStorage.setItem('highScore', highScore);
        highScoreDisplay.textContent = highScore;
      }
      
      // Start countdown and game
      music.currentTime = 0;
      music.play().catch(() => {});
      startCountdown();
    }

    // Start game
    startButton.addEventListener('click', () => {
      music.volume = 0.3;
      startScreen.style.display = 'none';
      gameContainer.style.display = 'block';
      resetGame();
    });
  </script>
</body>
</html>